{"ast":null,"code":"import * as actions from './actionTypes';\nlet lastId = 0;\nfunction get_group_data() {\n  return fetch('/api/groups').then(r => {\n    return r;\n  }).catch(err => {\n    return err;\n  });\n}\nfunction get_metrics_data() {\n  return fetch('/api/metrics').then(r => {\n    return r;\n  }).catch(err => {\n    return err;\n  });\n}\nfunction get_full_data() {\n  Promise.all([get_group_data(), get_metrics_data()]).then(([groups, metrics]) => {\n    console.log(metrics);\n  }).catch(err => {\n    console.log(err);\n  });\n}\nexport default function reducer(state = get_full_data().then(res => {\n  //console.log(res.json())\n  return res.json().then(res => {\n    return res;\n  });\n}), action) {\n  switch (action.type) {\n    case actions.CHOOSE_GROUP:\n      return state.then(res => {\n        return [...res, {\n          name: \"anna\"\n        }];\n      });\n    //        return state.then( res => {\n    //        console.log('old', res)\n    //        res.filter(gr => \"Москва\" === gr['group_name'])\n    //        console.log('new', res)\n    //        let ans = []\n    //        for (const node of res) {\n    //         console.log(node, action.payload.group)\n    //             if (node['group_name'] === action.payload.group)\n    //             {ans.push(node)}\n    //        }\n    //        console.log('new', ans )\n    //        return ans\n    //});\n    case actions.TASK_ADD:\n      return [...state, {\n        id: ++lastId,\n        title: action.payload.title,\n        completed: false\n      }];\n    case actions.TASK_TOGGLE:\n      return state.map(task => {\n        if (task.id === action.payload.id) return {\n          ...task,\n          completed: !task.completed\n        };\n        return task;\n      });\n    case actions.TASK_REMOVE:\n      return state.filter(task => action.payload.id !== task.id);\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["actions","lastId","get_group_data","fetch","then","r","catch","err","get_metrics_data","get_full_data","Promise","all","groups","metrics","console","log","reducer","state","res","json","action","type","CHOOSE_GROUP","name","TASK_ADD","id","title","payload","completed","TASK_TOGGLE","map","task","TASK_REMOVE","filter"],"sources":["C:/Users/User/Desktop/Тестовое задание Vue,React,Express,SQL от 26.10.2022/frontend/src/store/reducer.js"],"sourcesContent":["import * as actions from './actionTypes';\r\n\r\nlet lastId = 0;\r\n\r\nfunction get_group_data(){\r\n    return fetch('/api/groups')\r\n        .then(r => {\r\n            return r\r\n        })\r\n        .catch(err => {\r\n            return err\r\n        })\r\n}\r\n\r\nfunction get_metrics_data(){\r\n    return fetch('/api/metrics')\r\n        .then(r => {\r\n            return r\r\n        })\r\n        .catch(err => {\r\n            return err\r\n        })\r\n}\r\n\r\nfunction get_full_data() {\r\n    Promise.all([\r\n        get_group_data(),\r\n        get_metrics_data()\r\n    ])\r\n        .then(([groups, metrics])=>{\r\n            console.log(metrics)\r\n        })\r\n        .catch((err)=>{console.log(err)})\r\n}\r\n\r\n\r\nexport default function reducer(state = get_full_data().then(res => {\r\n    //console.log(res.json())\r\n    return res.json().then(res=> {return res})\r\n}), action) {\r\n  switch (action.type) {\r\n    case actions.CHOOSE_GROUP:\r\n          return state.then(res => {\r\n            return [...res, {name: \"anna\"}]\r\n          })\r\n//        return state.then( res => {\r\n//        console.log('old', res)\r\n//        res.filter(gr => \"Москва\" === gr['group_name'])\r\n//        console.log('new', res)\r\n//        let ans = []\r\n//        for (const node of res) {\r\n//         console.log(node, action.payload.group)\r\n//             if (node['group_name'] === action.payload.group)\r\n//             {ans.push(node)}\r\n//        }\r\n//        console.log('new', ans )\r\n//        return ans\r\n       //});\r\n    case actions.TASK_ADD:\r\n      return [...state, {\r\n        id: ++lastId,\r\n        title: action.payload.title,\r\n        completed: false,\r\n      }];\r\n\r\n    case actions.TASK_TOGGLE:\r\n      return state.map(task => {\r\n        if (task.id === action.payload.id)\r\n          return { ...task, completed: !task.completed }\r\n        return task;\r\n      });\r\n\r\n    case actions.TASK_REMOVE:\r\n      return state.filter(task => action.payload.id !== task.id);\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}"],"mappings":"AAAA,OAAO,KAAKA,OAAO,MAAM,eAAe;AAExC,IAAIC,MAAM,GAAG,CAAC;AAEd,SAASC,cAAcA,CAAA,EAAE;EACrB,OAAOC,KAAK,CAAC,aAAa,CAAC,CACtBC,IAAI,CAACC,CAAC,IAAI;IACP,OAAOA,CAAC;EACZ,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAI;IACV,OAAOA,GAAG;EACd,CAAC,CAAC;AACV;AAEA,SAASC,gBAAgBA,CAAA,EAAE;EACvB,OAAOL,KAAK,CAAC,cAAc,CAAC,CACvBC,IAAI,CAACC,CAAC,IAAI;IACP,OAAOA,CAAC;EACZ,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAI;IACV,OAAOA,GAAG;EACd,CAAC,CAAC;AACV;AAEA,SAASE,aAAaA,CAAA,EAAG;EACrBC,OAAO,CAACC,GAAG,CAAC,CACRT,cAAc,CAAC,CAAC,EAChBM,gBAAgB,CAAC,CAAC,CACrB,CAAC,CACGJ,IAAI,CAAC,CAAC,CAACQ,MAAM,EAAEC,OAAO,CAAC,KAAG;IACvBC,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC;EACxB,CAAC,CAAC,CACDP,KAAK,CAAEC,GAAG,IAAG;IAACO,OAAO,CAACC,GAAG,CAACR,GAAG,CAAC;EAAA,CAAC,CAAC;AACzC;AAGA,eAAe,SAASS,OAAOA,CAACC,KAAK,GAAGR,aAAa,CAAC,CAAC,CAACL,IAAI,CAACc,GAAG,IAAI;EAChE;EACA,OAAOA,GAAG,CAACC,IAAI,CAAC,CAAC,CAACf,IAAI,CAACc,GAAG,IAAG;IAAC,OAAOA,GAAG;EAAA,CAAC,CAAC;AAC9C,CAAC,CAAC,EAAEE,MAAM,EAAE;EACV,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKrB,OAAO,CAACsB,YAAY;MACnB,OAAOL,KAAK,CAACb,IAAI,CAACc,GAAG,IAAI;QACvB,OAAO,CAAC,GAAGA,GAAG,EAAE;UAACK,IAAI,EAAE;QAAM,CAAC,CAAC;MACjC,CAAC,CAAC;IACZ;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACO;IACH,KAAKvB,OAAO,CAACwB,QAAQ;MACnB,OAAO,CAAC,GAAGP,KAAK,EAAE;QAChBQ,EAAE,EAAE,EAAExB,MAAM;QACZyB,KAAK,EAAEN,MAAM,CAACO,OAAO,CAACD,KAAK;QAC3BE,SAAS,EAAE;MACb,CAAC,CAAC;IAEJ,KAAK5B,OAAO,CAAC6B,WAAW;MACtB,OAAOZ,KAAK,CAACa,GAAG,CAACC,IAAI,IAAI;QACvB,IAAIA,IAAI,CAACN,EAAE,KAAKL,MAAM,CAACO,OAAO,CAACF,EAAE,EAC/B,OAAO;UAAE,GAAGM,IAAI;UAAEH,SAAS,EAAE,CAACG,IAAI,CAACH;QAAU,CAAC;QAChD,OAAOG,IAAI;MACb,CAAC,CAAC;IAEJ,KAAK/B,OAAO,CAACgC,WAAW;MACtB,OAAOf,KAAK,CAACgB,MAAM,CAACF,IAAI,IAAIX,MAAM,CAACO,OAAO,CAACF,EAAE,KAAKM,IAAI,CAACN,EAAE,CAAC;IAE5D;MACE,OAAOR,KAAK;EAChB;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}